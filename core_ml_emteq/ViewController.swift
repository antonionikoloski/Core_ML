//
//  ViewController.swift
//  core_ml_emteq
//
//  Created by Antonio Nikoloski on 23.3.23.
//

import UIKit
import CoreML
class ViewController: UIViewController {
    
    override func viewDidLoad() {
        super.viewDidLoad()
        if let filePath = Bundle.main.path(forResource: "config", ofType: "yml") {
            // Read the configuration file
            guard let  config = readConfig(from: filePath) else { return  }
            
            do {
                guard let filePath_csv = Bundle.main.path(forResource: "test", ofType: "csv") else { return  }
                // Create an instance of the OcoFileParser class
                let ocoFileParser = try OcoFileParser(config: config, filePath: filePath_csv)

                // Call the parse method
              //  ocoFileParser.parse()

                // Optionally, you can call other methods on the ocoFileParser instance
                // For example: ocoFileParser.stopParsing()
            } catch {
                print("Error initializing OcoFileParser: \(error.localizedDescription)")
            }
        }
        let inputData: [[Double]] = [
            [10.865823444357531,14.508303572862207,13.55295335109745,12.53796901699641,15.56241022045599,11.214281376518532,-0.12568666056063163,0.09612773692006098,0.11355404811933005,-0.046999409650353555,0.01315430777774268,-0.008659768211941268,-0.0035289495105901413,-0.017706116529803355,0.18914592939908448,0.16034806718917383,0.00027026308792692884,-0.0014488112683964992],
            [10.831403436540102,14.424648438112587,13.372079334346147,12.514778402958603,15.490520086462642,11.165086447694145,-0.37584719572048453,0.2903177656872917,0.4778542146593701,-0.00258102752575284,-0.05637734165633561,0.1929395164605091,-0.012057306825062033,-0.0509912382002687,0.44998931144342014,0.2877289915467339,0.0011237843187736052,-0.0074242016460279335],
            [10.666663112869012,13.95543551842568,13.142128023199751,12.283377370794463,15.095637766688851,11.015214827488286,-1.8357258095434354,1.2628430653089324,2.7465249494432893,0.66799084105248,-0.7013996368083729,1.754220631097986,-0.06434247673270246,-0.2549425297785241,1.4319279026280158,0.5252158778318409,0.00635338894006016,-0.044034071296796186],
            [10.63068179466303,13.872052369538377,12.916384372058536,12.234044961736986,15.016841599684888,10.982496374996593,-2.058550480344249,1.4141501685310143,3.1003490864363683,0.7740992330571725,-0.8146975238628853,1.9993278006351989,-0.07250212576143901,-0.2868200859039064,1.5835606721392297,0.561334637298207,0.00717087648081406,-0.0497611821752099],
            [10.617595795736301,13.852395946669468,12.8725929867029,12.205825003475383,14.996085860129105,10.969201970066823,-2.0642376881892517,1.4183792638359876,3.105299895611882,0.7774162068878891,-0.8305769208625177,2.0066322711360174,-0.07271914610046737,-0.28773842712093867,1.5877393636712773,0.5671678976866878,0.007194570294673972,-0.04993396985315932]
            
        ]

        let features = calculateFeatures(data: inputData)
      //   print(inputData)
        print(features)

        
        
    }
}
